<table class="job">
  <tbody>
    <tr>
      <td class="identifier" style="padding-left: <%= depth * 2 %>rem;">
        <% if node.children.any? || node.try(:files).try(:any?) %>
          <button class="btn btn-info btn-xs import_expand" type="button" data-toggle="collapse" data-target=".child-of-<%= node.lineno %>" aria-expanded="false" aria-controls=".children-#{node.lineno}">
            +
          </button>
        <% end %>
        <% if node.is_a? Tenejo::PFFile %>
          <i class="fa fa-file-o" aria-hidden="true"></i>
        <% end %>
        <%= node.identifier.first %>
      </td>
      <td class="item_status"> -- </td>
      <td class="lineno"><%= node.lineno %></td>
      <td class="type"><%= node.class.to_s.delete_prefix("Tenejo::PF").truncate(4, omission: "") %></td>
      <td class="visibility"><%= node.visibility %></td>
      <td class="collection_count"> -</td>
      <td class="work_count"> -</td>
      <td class="file_count"> -</td>
      <td class="index"><%= order %></td>
      <td class="title"><%= node.title.first unless node.is_a? Tenejo::PFFile %><span class="file-name"> <%= node.files if node.is_a? Tenejo::PFFile %></span></td></td>
      <td class="filename"></td>
    </tr>
  </tbody>
</table>
<div class="job collapse in child-of-<%= node.lineno %>">
  <% node.children.each do |child| %>
    <%= render "child", node: child, parent: node.lineno, depth: depth + 1, order: nil %>
  <% end %>
  <% if node.try(:files).try(:any?) %>
    <% node.files.each_with_index do |file, index| %>
      <%= render "child", node: file, parent: node.lineno, depth: depth + 1, order: index + 1 %>
    <% end %>
  <% end %>
</div>





